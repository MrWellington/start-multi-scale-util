<div class="template-panel">
    <button kendoButton class="template-panel-load-button" (click)="browseTemplates($event)">Load Template</button>
    <input id="templateInput" class="template-panel-load-input" type="file"
        (change)="loadTemplate($event.target.files)">
    <button kendoButton (click)="saveTemplate()">Save Template</button>
    <div>Recents</div>
</div>
<div class="start-multi-scale-form-container">
    <form (ngSubmit)="onSubmit()" [formGroup]="startMultiScaleFormGroup">
        <div class="form-body">
            <div class="form-two-column">
                <div class="form-column-half">
                    <div class="form-container" formArrayName="epochs">
                        <kendo-label text="Epochs"></kendo-label>
                        <div class="numeric-group">
                            <div class="form-input" *ngFor="let epoch of epochs.controls; let i = index">
                                <input kendoTextBox type="number" step="1" [formControlName]="i" />
                            </div>
                        </div>
                    </div>
                    <div class="form-container" formArrayName="contentWeight">
                        <kendo-label text="Content weight"></kendo-label>
                        <div class="numeric-group">
                            <div class="form-input" *ngFor="let weight of contentWeight.controls; let i = index">
                                <input kendoTextBox type="number" step="1" [formControlName]="i" />
                            </div>
                        </div>
                    </div>
                    <div class="form-container" formArrayName="useReducedLayerSet">
                        <kendo-label text="Use reduced layout set"></kendo-label>
                        <div class="numeric-group">
                            <div class="form-input"
                                *ngFor="let useReducedLayerSet of useReducedLayerSet.controls; let i = index">
                                <input kendoTextBox type="number" step="1" [formControlName]="i" />
                            </div>
                        </div>
                    </div>
                    <div class="form-container">
                        <kendo-label text="Image ratio"></kendo-label>
                        <div class="form-input">
                            <input kendoTextBox class="img-ratio" type="number" step="0.1" formControlName="imgRatio" />
                        </div>
                        <div class="form-container">
                            <kendo-label text="Key"></kendo-label>
                            <div class="numeric-group">
                                <div class="form-input">
                                    <input kendoTextBox class="key" formControlName="key" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-column-half">
                    <div class="form-container">
                        <kendo-label text="Run until"></kendo-label>
                        <div class="form-input">
                            <kendo-slider #runUntilSlider formControlName="runUntil" [min]="0"
                                [max]="max_dim.length - 1">
                            </kendo-slider>
                            <span>{{max_dim[runUntilSlider.value]}}</span>
                        </div>
                    </div>
                    <div class="form-container">
                        <!--LEQ run_until-->
                        <kendo-label text="Start from dim"></kendo-label>
                        <div class="form-input">
                            <kendo-slider #startFromSlider formControlName="startFromDim" [min]="0"
                                [max]="max_dim.length - 1"></kendo-slider>
                            <span>{{max_dim[startFromSlider.value]}}</span>
                        </div>
                    </div>
                    <div class="form-container">
                        <!--LEQ run_until; change to small step of 1-->
                        <kendo-label text="Previous dim"></kendo-label>
                        <div class="form-input">
                            <kendo-slider #previousSlider formControlName="previousDim" name="run-until" [min]="0"
                                [max]="max_dim.length - 1"></kendo-slider>
                            <span>{{max_dim[previousSlider.value]}}</span>
                        </div>
                    </div>
                    <div class="form-container">
                        <!--Just allow one file-->
                        <kendo-label text="Content"></kendo-label>
                        <div class="form-input">
                            <kendo-fileselect [multiple]="false" (valueChange)="onContentChange($event)">
                            </kendo-fileselect>
                        </div>
                    </div>
                    <div class="form-container">
                        <kendo-label text="GPU"></kendo-label>
                        <div class="form-input">
                            <kendo-switch formControlName="gpu"></kendo-switch>
                        </div>
                    </div>
                </div>
            </div>
                    <div class="form-single-column">
            <div class="form-container">
                <kendo-label text="Styles"></kendo-label>
                <div class="form-input">
                    <kendo-fileselect class="styles" (valueChange)="onStyleChange($event)"></kendo-fileselect>
                </div>
                <table class="style-table" *ngIf="styles.controls.length > 0">
                    <thead>
                        <tr>
                            <th class="style-name-col">Name</th>
                            <th class="style-weight-col">Weight</th>
                            <th class="style-lr-col">Learning Rate</th>
                            <th class="style-elr-col">End Learning Rate</th>
                            <th class="style-acp-col">Auto Content Palette</th>
                            <th class="style-pi-col">Print Iters</th>
                            <th class="style-mm-col">Make Mirror</th>
                        </tr>
                    </thead>
                    <tbody>
                        <ng-container formArrayName="styles" *ngFor='let file of styles.controls; let i = index'>
                            <tr class="style-row" [formGroupName]="i">
                                <td>
                                    <kendo-label>{{file.value.fileName}}</kendo-label>
                                </td>
                                <td>
                                    <input kendoTextBox formControlName="weight" />
                                </td>
                                <td>
                                    <input kendoTextBox formControlName="learningRate" step="0.000001" />
                                </td>
                                <td>
                                    <input kendoTextBox formControlName="endLearningRate" step="0.000001" />
                                </td>
                                <td>
                                    <kendo-switch formControlName="autoContentPalette"></kendo-switch>
                                </td>
                                <td>
                                    <input kendoTextBox type="number" step="1" formControlName="printIters" />
                                </td>
                                <td>
                                    <kendo-slider #makeMirrorSlider formControlName="makeMirror" [min]="0" [max]="4">
                                    </kendo-slider>
                                    <span>{{makeMirrorSlider.value}}</span>
                                </td>
                            </tr>
                        </ng-container>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="form-single-column">
            <div class="form-container">
                <button kendoButton [primary]="true">Submit</button>
            </div>
        </div>
        </div>
    </form>
</div>
<div class="python-console-container">
    <ng-container *ngFor='let logMessage of pythonConsole'>
        <div>{{logMessage}}</div>
    </ng-container>
</div>